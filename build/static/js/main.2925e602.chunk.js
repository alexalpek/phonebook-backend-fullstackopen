(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},20:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),u=(n(20),n(2)),i=n(4),s=n(3),l=n.n(s),f="/api/persons",m=function(){return l.a.get(f).then((function(e){return e.data}))},d=function(e){return l.a.post(f,e).then((function(e){return e.data}))},h=function(e){return l.a.delete("".concat(f,"/").concat(e)).then((function(e){return e.data}))},b=function(e,t){return l.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},E=function(e){var t=e.setNewName,n=e.setNewPhoneNumber,r=e.persons,o=e.newName,c=e.newPhoneNumber,u=e.setPersons,s=e.setNotificationMessage,l=e.setIsError,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s(e),setTimeout((function(){s(null),t&&l(!1)}),5e3)},m=function(e,t){t(e.target.value)};return a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),s=o,0!==r.filter((function(e){return e.name===s})).length){if(window.confirm("".concat(o," is already in the phonebook, replace the old number with a new one?"))){var t=r.find((function(e){return e.name===o})),n=Object(i.a)(Object(i.a)({},t),{},{number:c});b(t.id,n).then(u(r.map((function(e){return e.id===t.id?n:e})))).then(f("".concat(n.name,"'s phone number is changed."))).catch((function(e){l(!0),f("Information of ".concat(n.name," has been already removed from the server"),!0),u(r.filter((function(e){return e.id!==n.id})))}))}}else{var a={name:o,number:c};d(a).then((function(e){return u(r.concat(e))})).then(f("".concat(a.name," is created."))).catch((function(e){return console.log(e)}))}var s}},a.a.createElement("div",null,"name:",a.a.createElement("input",{onChange:function(e){return m(e,t)}}),a.a.createElement("div",null,"number:",a.a.createElement("input",{onChange:function(e){return m(e,n)}}))),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},v=function(e){var t=e.filtered,n=e.persons,r=e.filterWord,o=e.setPersons,c=e.setNotificationMessage,u=e.setIsError,i=t?n.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})):n,s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c(e),setTimeout((function(){c(null),t&&u(!1)}),5e3)};return a.a.createElement("div",null,i.map((function(e){return a.a.createElement("div",{key:e.name},e.name," ",e.number," ",a.a.createElement("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&h(e.id).then(o(n.filter((function(t){return t.id!==e.id})))).then(s("".concat(e.name," is deleted."))).catch((function(t){u(!0),s("Information of ".concat(e.name," has been already removed from the server"),!0)}))}(e)}},"delete"))})))},p=function(e){var t=e.setFiltered,n=e.setFilterWord;return a.a.createElement("div",null,"filter shown with",a.a.createElement("input",{onChange:function(e){return function(e){n(e.target.value),t(!0)}(e)}}))},w=function(e){var t=e.text;return a.a.createElement("h2",null,t)},g=function(e){var t=e.message,n=e.isError;return null===t?null:a.a.createElement("div",{className:n?"error":"notification"},t)},N=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),i=Object(u.a)(c,2),s=i[0],l=i[1],f=Object(r.useState)(""),d=Object(u.a)(f,2),h=d[0],b=d[1],N=Object(r.useState)(""),j=Object(u.a)(N,2),O=j[0],P=j[1],k=Object(r.useState)(!1),S=Object(u.a)(k,2),I=S[0],y=S[1],C=Object(r.useState)(null),x=Object(u.a)(C,2),F=x[0],M=x[1],W=Object(r.useState)(!1),D=Object(u.a)(W,2),J=D[0],L=D[1];return Object(r.useEffect)((function(){m().then((function(e){return o(e)})).catch((function(e){return console.log(e)}))}),[]),a.a.createElement("div",null,a.a.createElement(w,{text:"Phonebook"}),a.a.createElement(g,{message:F,isError:J}),a.a.createElement(p,{setFiltered:y,setFilterWord:P}),a.a.createElement(w,{text:"add a new"}),a.a.createElement(E,{setNewName:l,setNewPhoneNumber:b,persons:n,newName:s,newPhoneNumber:h,setPersons:o,setNotificationMessage:M,setIsError:L}),a.a.createElement(w,{text:"Numbers"}),a.a.createElement(v,{filtered:I,filterWord:O,persons:n,setPersons:o,setNotificationMessage:M,setIsError:L}))};c.a.render(a.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.2925e602.chunk.js.map